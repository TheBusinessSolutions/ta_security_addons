<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="bank_cheque_preview_template">
        <t t-name="sttl_dynamic_bank_cheque_print.bank_cheque_preview_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <div class="container mt-4">
                        <div class="card shadow-sm p-4 border">
                            <div class="position-relative text-center p-3"
                                 style="width:800px;height:400px;margin:auto;">
                                <t t-if="doc.cheque_image">
                                    <img t-att-src="'data:image/png;base64,' + doc.cheque_image.decode('utf-8')"
                                         class="cheque-background img-fluid"
                                         style="width: 800px; height: 400px; position: absolute; top: -5px; left: 0;"/>

                                    <t t-if="">
                                        <t t-set="a_c_label_attr"
                                           t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'a_c_label')"/>
                                        <t t-if="a_c_label_attr">
                                            <div t-attf-style="position: absolute; left:#{a_c_label_attr[0].x1}px; top: {a_c_label_attr[0].y1}px;">
                                                <img t-att-src="request.httprequest.host_url + 'sttl_dynamic_bank_cheque_print/static/description/accountpay.png'"
                                                     style="width: 100px; height: auto;"/>
                                            </div>
                                        </t>
                                    </t>

                                    <!-- PAY TO -->
                                    <t t-set="pay_to_attr"
                                       t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'pay_to')"/>
                                    <t t-if="pay_to_attr">
                                        <div t-attf-style="position: absolute; left: #{pay_to_attr[0].x1}px; top: #{pay_to_attr[0].y1}px; font-size: 14px; font-weight: bold; width: #{pay_to_attr[0].x2 - pay_to_attr[0].x1}px; height: #{pay_to_attr[0].y2 - pay_to_attr[0].y1}px;font-size: #{doc.font_size}px;">
                                            <p>Pay To</p>
                                        </div>
                                    </t>

                                    <!-- AMOUNT -->
                                    <t t-set="amount_attr"
                                       t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'amount_box')"/>
                                    <t t-if="amount_attr">
                                        <div t-attf-style="position: absolute; left: #{amount_attr[0].x1}px; top: #{amount_attr[0].y1}px; font-size: 14px; font-weight: bold; width: #{amount_attr[0].x2 - amount_attr[0].x1}px; height: #{amount_attr[0].y2 - amount_attr[0].y1}px;font-size: #{doc.font_size}px;">
                                            <p>Amount</p>
                                        </div>
                                    </t>

                                    <!-- AMOUNT IN WORDS -->
                                    <t t-set="amount_words_attr"
                                       t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'amount_words1')"/>
                                    <t t-if="amount_words_attr">
                                        <div t-attf-style="position: absolute; left: #{amount_words_attr[0].x1}px; top: #{amount_words_attr[0].y1}px; font-size: #{doc.font_size}px;">
                                            <p>Amount in Words</p>
                                        </div>
                                    </t>

                                    <t t-set="amount_words_attr_2"
                                       t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'amount_words2')"/>
                                    <t t-if="amount_words_attr_2">
                                        <div t-attf-style="position: absolute; left: #{amount_words_attr_2[0].x1}px; top: #{amount_words_attr_2[0].y1}px; font-size: #{doc.font_size}px;">
                                            <p>Amount in Words 2</p>
                                        </div>
                                    </t>

                                    <!-- DATE -->
                                    <t t-set="date_attr"
                                       t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'cheque_date')"/>
                                    <t t-if="date_attr">
                                        <div t-attf-style="position: absolute; left: #{date_attr[0].x1}px; top: #{date_attr[0].y1}px; font-size: 14px; font-weight: bold; width: #{date_attr[0].x2 - date_attr[0].x1}px; height: #{date_attr[0].y2 - date_attr[0].y1}px;font-size: #{doc.font_size}px;">
                                            <p>Cheque Date</p>
                                        </div>
                                    </t>

                                    <t t-set="acc_number_attr"
                                       t-value="doc.cheque_attribute_ids.filtered(lambda a: a.attribute_name == 'account_number')"/>
                                    <t t-if="acc_number_attr">
                                        <div t-attf-style="position: absolute; left: #{acc_number_attr[0].x1}px; top: #{acc_number_attr[0].y1}px; font-size: 14px; font-weight: bold; width: #{acc_number_attr[0].x2 - acc_number_attr[0].x1}px; height: #{acc_number_attr[0].y2 - acc_number_attr[0].y1}px;font-size: #{doc.font_size}px;">
                                            <p>Account Number</p>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
